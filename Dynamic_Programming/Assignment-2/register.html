<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <title>Register</title>

    <style>
        .input-group-prepend {
            width: 100%;
            padding-left: 10px;
            font-size: medium;
        }

        .registrationForm label {
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            font-size: large;
            padding-top: 0;
            padding-left: 8px;
        }

        #gen {
            padding: 0;
            margin-top: 0;
        }

        input[type="text"],
        input[type="email"] {
            width: 100%;
        }

        input[type='radio'] {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border: 1px solid black;
            border-radius: 50%;
            outline: none;
            background-color: white;
            margin: 10px 10px 0 12px;
        }

        input[type='radio']:hover {
            border: 3px solid black;
        }

        input[type='radio']:before {
            content: '';
            display: block;
            width: 60%;
            height: 60%;
            margin: 20% auto;
            border-radius: 50%;
        }

        input[type='radio']:checked:before {
            background: black;
        }

        input[type="text"],
        input[type="password"],
        input[type="email"],
        input[type="date"] {
            border: 1px solid grey;
        }

        #pop {
            text-align: center;
        }
    </style>

    <script>

        document.addEventListener("DOMContentLoaded", function () {

            document.querySelector('#form').onsubmit = function () {


                const name = document.querySelector("#name").value;

                if (name.length == 0) {

                    document.querySelector("#name-error").style.color = "red";
                    document.querySelector("#name-error").padding = "0 0 0 8px";
                    document.querySelector("#name-error").innerHTML = "user name should not be empty";
                    return false

                } else if  (name.length > 50) {

                    document.querySelector("#name-error").style.color = "red";
                    document.querySelector("#name-error").padding = "0 0 0 8px";
                    document.querySelector("#name-error").innerHTML = "user name should not contain more than 50 characters";
                    return false

                }

                const email = document.querySelector("#email").value;

                if (email.length == 0) {

                    document.querySelector("#email-error").style.color = "red";
                    document.querySelector("#email-error").style.padding = "0 0 0 8px";
                    document.querySelector("#email-error").innerHTML = "email id is required";
                    return false

                } else if (email.length > 50) {

                    document.querySelector("#email-error").style.color = "red";
                    document.querySelector("#email-error").style.padding = "0 0 0 8px";
                    document.querySelector("#email-error").innerHTML = "email id should not contain more than 50 characters";
                    return false

                }

                const password = document.querySelector("#pwd").value;

                let regex = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,15})");


                if (password.length == 0) {

                    document.querySelector("#pwd-error").style.color = "red";
                    document.querySelector("#pwd-error").style.padding = "0 0 0 8px";
                    document.querySelector("#pwd-error").innerHTML = "Password should not be empty";
                    return false

                } else if (!regex.test(password)) {

                    document.querySelector("#pwd-error").style.color = "red";
                    document.querySelector("#pwd-error").style.padding = "0 0 0 8px";
                    document.querySelector("#pwd-error").innerHTML = "Password length should be in between 8 and 16 and it should include atleast one lowercase letter, one upper case letter, one digit and a special character"
                    return false

                }

                const conformPassword = document.querySelector("#cpwd").value;

                if (conformPassword.length == 0) {
                    
                    document.querySelector("#cpwd-error").style.color = "red";
                    document.querySelector("#cpwd-error").style.padding = "0 0 0 8px";
                    document.querySelector("#cpwd-error").innerHTML = "Password should not be empty";
                    return false

                } else if (!regex.test(conformPassword)) {

                    document.querySelector("#cpwd-error").style.color = "red";
                    document.querySelector("#cpwd-error").style.padding = "0 0 0 8px";
                    document.querySelector("#cpwd-error").innerHTML = "Password length should be in between 8 and 16 and it should include atleast one lowercase letter, one upper case letter, one digit and a special character"
                    return false

                }

                if (password !== conformPassword) {

                    document.querySelector("#cpwd-error").style.color = "red";
                    document.querySelector("#cpwd-error").style.padding = "0 0 0 8px"
                    document.querySelector("#cpwd-error").innerHTML = "Password and Conformation Password should match"
                    return false

                }

                const date_of_birth = document.querySelector("#dateOfBirth").value

                if (date_of_birth.length == 0) {

                    document.querySelector("#dob-error").style.color = "red";
                    document.querySelector("#dob-error").style.padding = "0 0 0 8px";
                    document.querySelector("#dob-error").innerHTML = "Date of Birth should not leave empty";
                    return false

                }

                const male = document.querySelector("#male").checked
                const female = document.querySelector("#female").checked
                const other = document.querySelector("#other").checked

                if (male == false && female == false && other == false) {

                    document.querySelector("#gen-error").style.color = "red";
                    document.querySelector("#gen-error").style.padding = "0 0 0 8px";
                    document.querySelector("#gen-error").innerHTML = "Please choose any of the above three options";
                    return false

                }

                return true;

            }

            document.querySelector("#name").onkeyup = function () {
                document.querySelector("#name-error").innerHTML = ""
            }

            document.querySelector("#email").onkeyup = function () {
                document.querySelector("#email-error").innerHTML = ""
            }

            document.querySelector("#pwd").onkeyup = function () {
                document.querySelector("#pwd-error").innerHTML = ""
            }

            document.querySelector("#cpwd").onkeyup = function () {
                document.querySelector("#cpwd-error").innerHTML = ""
            }

            document.querySelector("#dateOfBirth").onkeyup = function () {
                document.querySelector("#dob-error").innerHTML = ""
            }

        });

    </script>

</head>

<header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
        <a class="navbar-brand" href="/index">Book Reviews</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="./">Home<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/register">Sign Up</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/login">Login</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<body style="background-color: #ffffff;">

    <div class="container">

        <div class="row justify-content-center" style="margin-top: 1.5%;">

            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">

                <legend style="text-align: center;">Sign Up</legend>

                <form action="/profile" class="registrationForm" method="POST" id="form">

                    <label for="name">Name</label>

                    <div class="input-group mb-3">

                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><i class="fa fa-user"
                                    aria-hidden="true"></i></span>
                            <input type="text" placeholder="User Name" name="name" id = "name" class="form-control"
                                aria-label="Username" aria-describedby="basic-addon1">
                        </div>

                    </div>

                    <p><span id="name-error"></span></p><br>

                    <label for="email">Email Address</label><br>

                    <div class="input-group mb-3">

                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><i class="fa fa-envelope"
                                    aria-hidden="true"></i></span>
                            <input type="email" class="form-control" name="emailID" 
                            id="email" placeholder="Email"><br>
                        </div>

                    </div>

                    <p><span id="email-error"></span></p> <br>

                    <label for="pwd">Password</label><br>

                    <div class="input-group mb-3">

                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><i class="fa fa-key"
                                    aria-hidden="true"></i></i></span>
                            <input type="password" name="pwd" placeholder="Password" class="form-control" id="pwd"><br>
                        </div>

                    </div>

                    <p><span id="pwd-error"></span></p><br>

                    <label for="conformPassword">Confirm Password</label><br>

                    <div class="input-group mb-3">

                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><i class="fa fa-key"
                                    aria-hidden="true"></i></span>
                            <input type="password" id="cpwd" name="cpwd" placeholder="Password" class="form-control"><br>
                        </div>

                    </div>

                    <p><span id="cpwd-error"></span></p><br>

                    <label for="db">Date Of Birth</label><br>

                    <div class="input-group mb-3">

                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><i class="fa fa-calendar"
                                    aria-hidden="true"></i></span>
                            <input type="date" id="dateOfBirth" name="dob" class="form-control">
                        </div>

                    </div>

                    <p><span id="dob-error"></span></p><br>

                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" id="gen">

                        <label for="gen">Gender</label>

                        <input type="radio" name="options" id="male" value="Male" class = "gen"
                            style="height: 18px; width: 18px;">
                        <label>Male</label></input>

                        <input type="radio" name="options" id="female" value="Female" class="gen"
                            style="height: 18px; width: 18px;">
                        <label>Female</label></input>

                        <input type="radio" name="options" id="other" value="Other" class="gen"
                            style="height: 18px; width: 18px;">
                        <label>Other</label></input>

                    </div>

                    <p><span id="gen-error"></span></p><br>

                    <div>
                        <button type="submit" class="btn btn-primary" style="width: 150px;">Sign Up</button>
                    </div>

                </form>

            </div>

        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>

</body>

</html>